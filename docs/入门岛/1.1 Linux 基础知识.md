# 1.1 Linux 基础知识

## 一、任务说明

闯关任务需要在关键步骤中截图：

|            | 任务描述                                      | 完成所需时间 |
| ---------- | --------------------------------------------- | ------------ |
| 闯关任务   | 完成SSH连接与端口映射并运行`hello_world.py`   | 10min        |
| 可选任务 1 | 将Linux基础命令在开发机上完成一遍             | 10min        |
| 可选任务 2 | 使用 VSCODE 远程连接开发机并创建一个conda环境 | 10min        |
| 可选任务 3 | 创建并运行`test.sh`文件                       | 10min        |

- [文档地址](https://github.com/InternLM/Tutorial/blob/camp3/docs/L0/Linux/readme.md)

## 二、闯关任务

完成SSH连接与端口映射并运行hello_world.py

### ① SSH连接与端口映射

#### 结果截图

 ![alt text](image-7.png)

#### 步骤

- 进入InternStudio平台

    - [InternStudio地址](https://studio.intern-ai.org.cn/)
      ![alt text](image.png)

- 创建开发机

    - 1.点选左侧菜单栏“开发机”
    - 2.命名开发机
    - 3.点击选择镜像
    - 4.选择镜像并使用
    - 5.选择资源配置
    ![alt text](image-1.png)

- SSH连接
    - 创建ssh秘钥
        - 1.命令行输入 ```bash ssh-keygen -t rsa```
        - 2.系统用户.ssh文件下找到id_rsa.pub
        - 3.打开id_rsa.pub获取秘钥
    ![alt text](image-2.png)
    - 平台添加ssh秘钥
        - 右上角头像下拉点选“访问管理”
        - 点击“添加SSH公钥”
        ![alt text](image-3.png)
        - 粘贴公钥
        - 命名后点击添加
        ![alt text](image-4.png)
    - 免密登录
        - 点击创建的开发机“SSH连接”
        - 点击登录命令“复制”
        - 打开命令终端粘贴登录命令
    ![alt text](image-5.png)
    - 登录成功
    ![alt text](image-6.png)

        


### ② 运行hello_world.py

#### 结果截图
![alt text](image-11.png)

#### 步骤

- 进入开发机vscode
    - 点击创建的开发机"进入开发机“
    - 切换顶部tab进入vscode
    ![alt text](image-8.png)

- 创建hello_world.py文件
    - ROOT文件夹下创建pro文件夹
    - pro文件夹下创建hello_world.py文件
    ![alt text](image-9.png)

- 编写hello_world.py文件
```Python linenums="1"
import socket
import re
import gradio as gr
 
# 获取主机名
def get_hostname():
    hostname = socket.gethostname()
    match = re.search(r'-(\d+)$', hostname)
    name = match.group(1)
    
    return name
 
# 创建 Gradio 界面
with gr.Blocks(gr.themes.Soft()) as demo:
    html_code = f"""
            <p align="center">
            <a href="https://intern-ai.org.cn/home">
                <img src="https://intern-ai.org.cn/assets/headerLogo-4ea34f23.svg" alt="Logo" width="20%" style="border-radius: 5px;">
            </a>
            </p>
            <h1 style="text-align: center;">☁️ Welcome {get_hostname()} user, welcome to the ShuSheng LLM Practical Camp Course!</h1>
            <h2 style="text-align: center;">😀 Let’s go on a journey through ShuSheng Island together.</h2>
            <p align="center">
                <a href="https://github.com/InternLM/Tutorial/blob/camp3">
                    <img src="https://oss.lingkongstudy.com.cn/blog/202406301604074.jpg" alt="Logo" width="20%" style="border-radius: 5px;">
                </a>
            </p>

            """
    gr.Markdown(html_code)

demo.launch()
```
- 安装gradio依赖包 ```bash pip install gradio==4.29.0```
![alt text](image-10.png)

- 运行hello_world.py文件 ``` python hello_world.py ```
![alt text](image-12.png)

- 本地浏览
    - 本地端口映射 
        - 本地命令行输入 ：```bash ssh -p 48886 root@ssh.intern-ai.org.cn -CNg -L 7860:127.0.0.1:7860 -o StrictHostKeyChecking=no```
        - **注意** ：替换端口为自己端口号
    - 访问 ```http://127.0.0.1:7860/```
    ![alt text](image-11.png)

## 可选任务

### ① Linux基础命令

### ② VSCODE 远程连接开发机并创建一个conda环境

### ③ 创建并运行`test.sh`文件