# 1.1 Linux åŸºç¡€çŸ¥è¯†

## ä¸€ã€ä»»åŠ¡è¯´æ˜

é—¯å…³ä»»åŠ¡éœ€è¦åœ¨å…³é”®æ­¥éª¤ä¸­æˆªå›¾ï¼š

|            | ä»»åŠ¡æè¿°                                      | å®Œæˆæ‰€éœ€æ—¶é—´ |
| ---------- | --------------------------------------------- | ------------ |
| é—¯å…³ä»»åŠ¡   | å®ŒæˆSSHè¿æ¥ä¸ç«¯å£æ˜ å°„å¹¶è¿è¡Œ`hello_world.py`   | 10min        |
| å¯é€‰ä»»åŠ¡ 1 | å°†LinuxåŸºç¡€å‘½ä»¤åœ¨å¼€å‘æœºä¸Šå®Œæˆä¸€é             | 10min        |
| å¯é€‰ä»»åŠ¡ 2 | ä½¿ç”¨ VSCODE è¿œç¨‹è¿æ¥å¼€å‘æœºå¹¶åˆ›å»ºä¸€ä¸ªcondaç¯å¢ƒ | 10min        |
| å¯é€‰ä»»åŠ¡ 3 | åˆ›å»ºå¹¶è¿è¡Œ`test.sh`æ–‡ä»¶                       | 10min        |

- [æ–‡æ¡£åœ°å€](https://github.com/InternLM/Tutorial/blob/camp3/docs/L0/Linux/readme.md)

## äºŒã€é—¯å…³ä»»åŠ¡

- ä»»åŠ¡è¯´æ˜ï¼š```bash å®ŒæˆSSHè¿æ¥ä¸ç«¯å£æ˜ å°„å¹¶è¿è¡Œhello_world.py```
- ç»“æœæˆªå›¾
    - SSHè¿æ¥ä¸ç«¯å£æ˜ å°„
    ![alt text](image-7.png)
    - è¿è¡Œhello_world.py
    ![alt text](image-11.png)

### â‘  SSHè¿æ¥ä¸ç«¯å£æ˜ å°„

#### æ­¥éª¤

- è¿›å…¥InternStudioå¹³å°

    - [InternStudioåœ°å€](https://studio.intern-ai.org.cn/)
      ![alt text](image.png)

- åˆ›å»ºå¼€å‘æœº

    - 1.ç‚¹é€‰å·¦ä¾§èœå•æ â€œå¼€å‘æœºâ€
    - 2.å‘½åå¼€å‘æœº
    - 3.ç‚¹å‡»é€‰æ‹©é•œåƒ
    - 4.é€‰æ‹©é•œåƒå¹¶ä½¿ç”¨
    - 5.é€‰æ‹©èµ„æºé…ç½®
    ![alt text](image-1.png)

- SSHè¿æ¥
    - åˆ›å»ºsshç§˜é’¥
        - 1.å‘½ä»¤è¡Œè¾“å…¥ ```bash ssh-keygen -t rsa```
        - 2.ç³»ç»Ÿç”¨æˆ·.sshæ–‡ä»¶ä¸‹æ‰¾åˆ°id_rsa.pub
        - 3.æ‰“å¼€id_rsa.pubè·å–ç§˜é’¥
    ![alt text](image-2.png)
    - å¹³å°æ·»åŠ sshç§˜é’¥
        - å³ä¸Šè§’å¤´åƒä¸‹æ‹‰ç‚¹é€‰â€œè®¿é—®ç®¡ç†â€
        - ç‚¹å‡»â€œæ·»åŠ SSHå…¬é’¥â€
        ![alt text](image-3.png)
        - ç²˜è´´å…¬é’¥
        - å‘½ååç‚¹å‡»æ·»åŠ 
        ![alt text](image-4.png)
    - å…å¯†ç™»å½•
        - ç‚¹å‡»åˆ›å»ºçš„å¼€å‘æœºâ€œSSHè¿æ¥â€
        - ç‚¹å‡»ç™»å½•å‘½ä»¤â€œå¤åˆ¶â€
        - æ‰“å¼€å‘½ä»¤ç»ˆç«¯ç²˜è´´ç™»å½•å‘½ä»¤
    ![alt text](image-5.png)
    - ç™»å½•æˆåŠŸ
    ![alt text](image-6.png)

        


### â‘¡ è¿è¡Œhello_world.py

#### æ­¥éª¤

- è¿›å…¥å¼€å‘æœºvscode
    - ç‚¹å‡»åˆ›å»ºçš„å¼€å‘æœº"è¿›å…¥å¼€å‘æœºâ€œ
    - åˆ‡æ¢é¡¶éƒ¨tabè¿›å…¥vscode
    ![alt text](image-8.png)

- åˆ›å»ºhello_world.pyæ–‡ä»¶
    - ROOTæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºproæ–‡ä»¶å¤¹
    - proæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºhello_world.pyæ–‡ä»¶
    ![alt text](image-9.png)

- ç¼–å†™hello_world.pyæ–‡ä»¶
```Python linenums="1"
import socket
import re
import gradio as gr
 
# è·å–ä¸»æœºå
def get_hostname():
    hostname = socket.gethostname()
    match = re.search(r'-(\d+)$', hostname)
    name = match.group(1)
    
    return name
 
# åˆ›å»º Gradio ç•Œé¢
with gr.Blocks(gr.themes.Soft()) as demo:
    html_code = f"""
            <p align="center">
            <a href="https://intern-ai.org.cn/home">
                <img src="https://intern-ai.org.cn/assets/headerLogo-4ea34f23.svg" alt="Logo" width="20%" style="border-radius: 5px;">
            </a>
            </p>
            <h1 style="text-align: center;">â˜ï¸ Welcome {get_hostname()} user, welcome to the ShuSheng LLM Practical Camp Course!</h1>
            <h2 style="text-align: center;">ğŸ˜€ Letâ€™s go on a journey through ShuSheng Island together.</h2>
            <p align="center">
                <a href="https://github.com/InternLM/Tutorial/blob/camp3">
                    <img src="https://oss.lingkongstudy.com.cn/blog/202406301604074.jpg" alt="Logo" width="20%" style="border-radius: 5px;">
                </a>
            </p>

            """
    gr.Markdown(html_code)

demo.launch()
```
- å®‰è£…gradioä¾èµ–åŒ… ```bash pip install gradio==4.29.0```
![alt text](image-10.png)

- è¿è¡Œhello_world.pyæ–‡ä»¶ ``` python hello_world.py ```
![alt text](image-12.png)

- æœ¬åœ°æµè§ˆ
    - æœ¬åœ°ç«¯å£æ˜ å°„ 
        - æœ¬åœ°å‘½ä»¤è¡Œè¾“å…¥ ï¼š```bash ssh -p 48886 root@ssh.intern-ai.org.cn -CNg -L 7860:127.0.0.1:7860 -o StrictHostKeyChecking=no```
        - **æ³¨æ„** ï¼šæ›¿æ¢ç«¯å£ä¸ºè‡ªå·±ç«¯å£å·
    - è®¿é—® ```http://127.0.0.1:7860/```
    ![alt text](image-11.png)

## å¯é€‰ä»»åŠ¡

### â‘  LinuxåŸºç¡€å‘½ä»¤

#### æ–‡ä»¶ç®¡ç†

- **åˆ›å»ºæ–‡ä»¶**ï¼šå¯ä»¥ä½¿ç”¨ `touch` å‘½ä»¤åˆ›å»ºç©ºæ–‡ä»¶ã€‚
- **åˆ›å»ºç›®å½•**ï¼šä½¿ç”¨ `mkdir` å‘½ä»¤ã€‚
- **ç›®å½•åˆ‡æ¢**ï¼šä½¿ç”¨`cd`å‘½ä»¤ã€‚
- **æ˜¾ç¤ºæ‰€åœ¨ç›®å½•**ï¼šä½¿ç”¨`pwd`å‘½ä»¤ã€‚
- **æŸ¥çœ‹æ–‡ä»¶å†…å®¹**ï¼šå¦‚ä½¿ç”¨ `cat` ç›´æ¥æ˜¾ç¤ºæ–‡ä»¶å…¨éƒ¨å†…å®¹ï¼Œ`more` å’Œ `less` å¯ä»¥åˆ†é¡µæŸ¥çœ‹ã€‚
- **ç¼–è¾‘æ–‡ä»¶**ï¼šå¦‚ `vi` æˆ– `vim` ç­‰ç¼–è¾‘å™¨ã€‚
- **å¤åˆ¶æ–‡ä»¶**ï¼šç”¨ `cp` å‘½ä»¤ã€‚
- **åˆ›å»ºæ–‡ä»¶é“¾æ¥**ï¼šç”¨`ln`å‘½ä»¤ã€‚
- **ç§»åŠ¨æ–‡ä»¶**ï¼šé€šè¿‡ `mv` å‘½ä»¤ã€‚
- **åˆ é™¤æ–‡ä»¶**ï¼šä½¿ç”¨ `rm` å‘½ä»¤ã€‚
- **åˆ é™¤ç›®å½•**ï¼š`rmdir`ï¼ˆåªèƒ½åˆ é™¤ç©ºç›®å½•ï¼‰æˆ– `rm -r`ï¼ˆå¯åˆ é™¤éç©ºç›®å½•ï¼‰ã€‚
- **æŸ¥æ‰¾æ–‡ä»¶**ï¼šå¯ä»¥ç”¨ `find` å‘½ä»¤ã€‚
- **æŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•çš„è¯¦ç»†ä¿¡æ¯**ï¼šä½¿ç”¨`ls`å‘½ä»¤ï¼Œå¦‚ä½¿ç”¨ `ls -l`æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚
- **å¤„ç†æ–‡ä»¶**ï¼šè¿›è¡Œå¤æ‚çš„æ–‡ä»¶æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨`sed`å‘½ä»¤ã€‚

#### è¿›ç¨‹ç®¡ç†

**è¿›ç¨‹ç®¡ç†**å‘½ä»¤æ˜¯è¿›è¡Œç³»ç»Ÿç›‘æ§å’Œè¿›ç¨‹ç®¡ç†æ—¶çš„é‡è¦å·¥å…·ï¼Œå¸¸ç”¨çš„è¿›ç¨‹ç®¡ç†å‘½ä»¤æœ‰ä»¥ä¸‹å‡ ç§ï¼š

- **ps**ï¼šæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹
- **top**ï¼šåŠ¨æ€æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹
- **pstree**ï¼šæ ‘çŠ¶æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹
- **pgrep**ï¼šç”¨äºæŸ¥æ‰¾è¿›ç¨‹
- **nice**ï¼šæ›´æ”¹è¿›ç¨‹çš„ä¼˜å…ˆçº§
- **jobs**ï¼šæ˜¾ç¤ºè¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯
- **bg å’Œ fg**ï¼šå°†è¿›ç¨‹è°ƒå…¥åå°
- **kill**ï¼šæ€æ­»è¿›ç¨‹

```bash nvidia-smi```

![image](https://github.com/InternLM/Tutorial/assets/110531742/1ebd2761-c329-4fd8-bc03-8770f9a1b1a6)

### â‘¡ VSCODE è¿œç¨‹è¿æ¥å¼€å‘æœºå¹¶åˆ›å»ºä¸€ä¸ªcondaç¯å¢ƒ

#### ä½¿ç”¨VScodeè¿›è¡Œsshè¿œç¨‹è¿æ¥

- Remote-SSHæ’ä»¶
    - 1.æ‰“å¼€æ‰©å±•é¢æ¿
    - 2.æœç´¢Remote-SSHæ’ä»¶
    - 3.å®‰è£…
    ![alt text](image-13.png)

- sshè¿œç¨‹è¿æ¥
    - 1.æ‰“å¼€å‘½ä»¤é¢æ¿
    - 2.è¾“å…¥sshå‘½ä»¤
    ![alt text](image-14.png)
    - ç‚¹å‡»connetè¿æ¥ä¸»æœº
    ![alt text](image-15.png)
    - æŠ¥é”™
    ![alt text](image-16.png)



### â‘¢ åˆ›å»ºå¹¶è¿è¡Œ`test.sh`æ–‡ä»¶

```bash 
cd pro/
touch test.sh
vim test.sh
nvidia-smi
sh test.sh
```

![alt text](image-17.png)
